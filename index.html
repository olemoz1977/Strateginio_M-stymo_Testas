
<!DOCTYPE html>
<html lang="lt">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Strateginio mąstymo testas (STQ)</title>
  <style>
    :root{
      --bg:#0f172a; --card:#111827; --ink:#e5e7eb; --muted:#9ca3af;
      --brand:#14b8a6; --warn:#f59e0b; --danger:#ef4444;
    }
    html,body{height:100%}
    body{font-family:system-ui,Segoe UI,Roboto,Arial,sans-serif;
         background:linear-gradient(180deg,var(--bg),#090d1a);color:var(--ink);margin:0}
    header{position:sticky;top:0;background:#0b1224cc;backdrop-filter:saturate(140%) blur(6px);
           border-bottom:1px solid #1f2937}
    header .wrap{max-width:980px;margin:0 auto;padding:10px 16px;display:flex;gap:16px;align-items:center}
    h1{font-size:clamp(20px,3.2vw,28px);margin:0}
    main{max-width:980px;margin:24px auto;padding:0 16px}
    .card{background:var(--card);border:1px solid #1f2937;border-radius:14px;box-shadow:0 8px 24px rgba(0,0,0,.35)}
    .intro{padding:18px 20px}
    .progress{height:8px;background:#0b1224;border-radius:99px;overflow:hidden;margin-top:8px}
    .progress>span{display:block;height:100%;background:linear-gradient(90deg,var(--brand),#60a5fa);width:0%}
    .q{padding:18px 20px;border-top:1px solid #1f2937}
    .q h3{margin:0 0 8px;font-size:18px}
    .choices{display:grid;gap:6px}
    .choices label{display:flex;gap:8px;align-items:flex-start;padding:8px;border-radius:10px;
                   border:1px solid #1f2937;background:#0b1224;cursor:pointer}
    .choices input{margin-top:2px}
    .group-title{color:var(--muted);font-weight:600;margin:4px 0 10px}
    .actions{display:flex;flex-wrap:wrap;gap:10px;padding:16px;border-top:1px solid #1f2937}
    button{appearance:none;border:none;border-radius:10px;padding:10px 14px;font-weight:600;cursor:pointer}
    .primary{background:var(--brand);color:#052327}
    .ghost{background:#0b1224;color:var(--ink);border:1px solid #1f2937}
    .danger{background:var(--danger);color:#fff}
    .warn{background:var(--warn);color:#1f2937}
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:14px;padding:16px}
    .kpi{background:#0b1224;border:1px solid #1f2937;border-radius:12px;padding:12px}
    .kpi h4{margin:0 0 6px}
    .muted{color:var(--muted)}
    footer{max-width:980px;margin:24px auto;padding:0 16px 24px;color:var(--muted)}
    @media print{
      header,.actions{display:none}
      body{background:#fff;color:#000}
      .card{border:none;box-shadow:none}
      .choices label{background:#fff;border-color:#ddd}
    }
  </style>
</head>
<body>
  <header>
    <div class="wrap">
      <h1>Strateginio mąstymo testas (STQ)</h1>
      <span class="muted" id="answeredInfo">Atsakyta: 0/15</span>
    </div>
  </header>

  <main>
    <section class="card intro">
      <p><strong>Instrukcija:</strong> Pasirinkite vieną atsakymą, kuris tiksliausiai atspindi Jūsų įprastą veiksmą tokioje situacijoje.</p>
      <div class="progress" aria-label="Progresas"><span id="bar"></span></div>
    </section>

    <!-- Forma su klausimais -->
    <form id="stqForm" class="card" novalidate>
      <div id="questions"></div>
      <div class="actions">
        <button type="button" class="primary" id="submitBtn">Pateikti atsakymus</button>
        <button type="button" class="ghost" id="saveBtn">Išsaugoti naršyklėje</button>
        <button type="button" class="warn" id="loadBtn">Atkurti iš naršyklės</button>
        <button type="button" class="ghost" onclick="window.print()">Spausdinti / PDF</button>
        <button type="button" class="danger" id="clearBtn">Išvalyti</button>
      </div>
    </form>

  
<!-- Rezultatai -->
<section class="card" id="results" aria-live="polite">
  <div class="grid">
    <div class="kpi">
      <h4>Sisteminis mąstymas</h4>
      <div class="muted" id="sysScore">0/25</div>
      <!-- Žodinis vertinimas + patarimai -->
      <div class="interp" id="sysInterp"></div>
    </div>
    <div class="kpi">
      <h4>Perframinimas</h4>
      <div class="muted" id="refrScore">0/25</div>
      <div class="interp" id="refrInterp"></div>
    </div>
    <div class="kpi">
      <h4>Refleksija</h4>
      <div class="muted" id="reflScore">0/25</div>
      <div class="interp" id="reflInterp"></div>
    </div>
  </div>

  <!-- Bendras -->
  <div class="total">
    <h4>Bendras rezultatas</h4>
    <div class="muted" id="totalScore">0/75</div>
    <div class="interp" id="totalInterp"></div>
  </div>
</section>

  </main>

  <footer>
    <small>© 2025 STQ | Sukurta Oleg Mozochin („GitHub Pages“). Veikia be serverio, duomenys saugomi tik naršyklėje.</small>
  </footer>

<script>
/* Klausimų duomenys su balais pagal Document.docx (kiekvieno pasirinkimo balai) */
const data = [
  // I. Sisteminis mąstymas (Q1–Q5)
  { group:'Sisteminis mąstymas', text:'1. Kai sprendžiu skyriaus biudžeto sumažinimo problemą, aš...', opts:[
    'naudoju formalią matrica, kad įvertinčiau tiesioginį poveikį visiems susijusiems skyriams ir skyrių motyvacijai.',
    'visą dėmesį sutelkiu į savo skyriaus išlaidų mažinimą, ignoruodamas galimus padarinius kitur',
    'analizuoju biudžeto sumažinimo poveikį visos organizacijos vertės grandinei, kad užtikrinčiau, jog pokytis nepažeis bendro įmonės konkurencinio pranašumo.',
    'paklausiu kelių kitų skyrių vadovų nuomonės apie galimus neigiamus padarinius jų darbui.',
    'atsižvelgiu į gretimų skyrių prieštaravimus, bet vis tiek darau tai, kas geriausia mano skyriui.'
  ], scores:[4,1,5,3,2] }, /* balai pagal docx */  /* [1](https://lietpaklt-my.sharepoint.com/personal/oleg_mozochin_lietpak_com/_layouts/15/Doc.aspx?sourcedoc=%7B13E9AD02-B3C7-493B-87A9-F776DACF0809%7D&file=Document.docx&action=default&mobileredirect=true) */

  { group:'Sisteminis mąstymas', text:'2. Susidūrus su klientų praradimu, aš...', opts:[
    'analizuoju ne tik vidinius procesus, bet ir išorinius rinkos pokyčius bei konkurentų veiksmus, siekdamas atpažinti ilgalaikes tendencijas, kurios galėjo pakeisti klientų poreikius.',
    'peržiūriu paskutinių savaičių pardavimų ataskaitas, kad pamatyčiau, kurioje srityje praradome daugiausiai.',
    'iš karto kaltinu pardavimų skyrių ir reikalauju nedelsiant padidinti pardavimus per šį mėnesį.',
    'stengiuosi atsekti, kokios vidinės klaidos (pvz., IT sistemos lėtumas ar biurokratiniai procesai) lėmė klientų patirties pablogėjimą.',
    'peržiūriu tiek pardavimų, tiek produktų kokybės duomenis, ieškodamas akivaizdžių nesutapimų. '
  ], scores:[5,2,1,4,3] }, /* [1](https://lietpaklt-my.sharepoint.com/personal/oleg_mozochin_lietpak_com/_layouts/15/Doc.aspx?sourcedoc=%7B13E9AD02-B3C7-493B-87A9-F776DACF0809%7D&file=Document.docx&action=default&mobileredirect=true) */

  { group:'Sisteminis mąstymas', text:'3. Mano požiūris į ilgalaikes makro tendencijas (pvz., AI, reguliavimas) yra...', opts:[
    'aš perskaitau pagrindines naujienas, bet tai neturi įtakos mano savaitiniams sprendimams. ',
    'aš reguliariai inicijuoju scenarijų planavimo susitikimus, kad įvertinčiau, kaip šios tendencijos gali priversti mūsų įmonę fundamentaliai pakeisti verslo modelį per ateinančius 3-5 metus.',
    'kad tai yra aukščiausios vadovybės reikalas, o aš turiu susitelkti į šiandienos rezultatus',
    'aš kartais diskutuoju apie tai su komanda, bandydamas rasti idėjų, bet neturiu nuolatinio proceso',
    'aš nuolat stebiu šias tendencijas ir peržiūriu savo skyriaus prioritetus kas ketvirtį.'
  ], scores:[2,5,1,3,4] }, /* [1](https://lietpaklt-my.sharepoint.com/personal/oleg_mozochin_lietpak_com/_layouts/15/Doc.aspx?sourcedoc=%7B13E9AD02-B3C7-493B-87A9-F776DACF0809%7D&file=Document.docx&action=default&mobileredirect=true) */

  { group:'Sisteminis mąstymas', text:'4. Kai iškyla problemos, viršijančios skyriaus kompetenciją, aš...', opts:[
    'bandau išspręsti problemą tik savo skyriaus resursais, kad parodyčiau efektyvumą.',
    '...sistemiškai ieškau pasikartojančios organizacinės priežasties (pvz., neaiškių atsakomybių, silpnų IT sąsajų), dėl kurios ši problema nuolat atsiranda keliuose skyriuose. ',
    'visą atsakomybę perduodu aukštesnei vadovybei arba kitam skyriui, ir nustoju stebėti eigą.',
    'bendradarbiauju su vienu ar dviem susijusiais skyriais, kad rasčiau kompromisą.',
    'inicijuoju tarpfunkcinį (angl. cross-functional) susitikimą, kad išanalizuočiau, kaip problemai spręsti reikia bendros kelių skyrių sistemos.'
  ], scores:[2,5,1,3,4] }, /* [1](https://lietpaklt-my.sharepoint.com/personal/oleg_mozochin_lietpak_com/_layouts/15/Doc.aspx?sourcedoc=%7B13E9AD02-B3C7-493B-87A9-F776DACF0809%7D&file=Document.docx&action=default&mobileredirect=true) */

  { group:'Sisteminis mąstymas', text:'5. Planuojant ilgalaikę strategiją, didžiausią dėmesį skiriu...', opts:[
    'kritinių prielaidų nustatymui apie ateitį (pvz., ar rinka augs, ar technologijos keisis) ir planų kūrimui, kaip veiksime, jei tos prielaidos pasirodys klaidingos. ',
    'išteklių paskirstymui pagal dabartinius projektų prioritetus. ',
    'tikslų nustatymui, pagrįstam praėjusių metų rezultatais. ',
    '.įvairioms rizikoms ir galimybėms, įtraukiant tiek vidinius, tiek išorinius veiksnius.',
    'išsamiai analizei, kaip pasiekti konkurencinį pranašumą artimiausiu metu (iki 1 metų)'
  ], scores:[5,2,1,4,3] }, /* [1](https://lietpaklt-my.sharepoint.com/personal/oleg_mozochin_lietpak_com/_layouts/15/Doc.aspx?sourcedoc=%7B13E9AD02-B3C7-493B-87A9-F776DACF0809%7D&file=Document.docx&action=default&mobileredirect=true) */

  // II. Perframinimas (Q6–Q10)
  { group:'Perframinimas', text:'6. Komandai nepavykstant įveikti sudėtingos kliūties (pvz., nepasiekiami pardavimų tikslai), aš...', opts:[
    'sliepiu komandai pilnai sustabdyti veiklą ir sugalvoti 5 skirtingus būdus, kaip būtų galima iš naujo apibrėžti problemą (pvz., ne "pardavimų trūkumas", o "vertės pasiūlymo neatitikimas"). ',
    '...organizuoju dirbtuves, kurios skirtos problemai spręsti iš kito vaidmens perspektyvos (pvz., "Ką darytų mūsų konkurentas/klientas šioje situacijoje?"), kad sugeneruotume visiškai naują požiūrį.',
    'paprašau jų pateikti 3-4 naujus, bet panašius veiksmų planus. ',
    'primenu jiems, kad reikia stengtis labiau ir naudoti jau patvirtintas taktikas. ',
    'inicijuoju diskusiją, kurios metu siūlomos ir radikaliai kitokios idėjos. '
  ], scores:[4,5,2,1,3] }, /* [1](https://lietpaklt-my.sharepoint.com/personal/oleg_mozochin_lietpak_com/_layouts/15/Doc.aspx?sourcedoc=%7B13E9AD02-B3C7-493B-87A9-F776DACF0809%7D&file=Document.docx&action=default&mobileredirect=true) */

  { group:'Perframinimas', text:'7. Ruošiantis svarbiam sprendimui, aš visada...', opts:[
    'inicijuoja procesą, kurio metu sąmoningai kuriami keli nesuderinami scenarijai (pvz., geriausias atvejis, blogiausias atvejis, neįtikėtinas atvejis), kad išvengčiau "tunelinio mąstymo" ir parengčiau save staigiems pokyčiams. ',
    'ieškau objektyvių duomenų, kurie padėtų man apsispręsti tarp dviejų akivaizdžių pasirinkimų.',
    'prašau komandos surinkti duomenis, kurie patvirtintų ar paneigtų mano pradinę idėją. ',
    'ieškau įrodymų, kurie patvirtintų mano pradinę idėją ir požiūrį.',
    'ieškau žmonių su priešinga nuomone ir prašau jų parengti atsakomąjį pasiūlymą, kad galėčiau patikrinti savo prielaidas.'
  ], scores:[5,2,3,1,4] }, /* [1](https://lietpaklt-my.sharepoint.com/personal/oleg_mozochin_lietpak_com/_layouts/15/Doc.aspx?sourcedoc=%7B13E9AD02-B3C7-493B-87A9-F776DACF0809%7D&file=Document.docx&action=default&mobileredirect=true) */

  { group:'Perframinimas', text:'8. Susidūrus su sudėtingu tikslu, aš...', opts:[
    '.naudoju tik tuos metodus ir įrankius, kuriuos jau esu išbandęs anksčiau ir žinau, kad veikia.',
    'naudoju populiariausius pramonės standartus (pvz., SWOT) analizei atlikti.',
    'ieškau visiškai nekonvencinių ir kūrybinių sprendimų, kurie gali atrodyti rizikingi, bet gali duoti didžiulę grąžą. ',
    'aš manau, kad paties tikslo apibrėžimas gali būti klaidingas, todėl prieš dirbdamas bandau išsiaiškinti, koks yra tikrasis verslo poreikis už to tikslo, ir galbūt pakeisti kryptį. ',
    'svarstau apie metodų adaptavimą iš kitų pramonės šakų (pvz., logistikos metodai IT projektui). '
  ], scores:[1,2,4,5,3] }, /* [1](https://lietpaklt-my.sharepoint.com/personal/oleg_mozochin_lietpak_com/_layouts/15/Doc.aspx?sourcedoc=%7B13E9AD02-B3C7-493B-87A9-F776DACF0809%7D&file=Document.docx&action=default&mobileredirect=true) */

  { group:'Perframinimas', text:'9. Iškilus netikėtai problemai, aš...', opts:[
    'bandau pritaikyti standartines organizacijos procedūras naujai problemai.',
    'gaištu laiką ieškodamas analogiškų problemų sprendimų savo patirtyje.',
    'sistemiškai ieškau sprendimų, kurie buvo sėkmingai taikomi visiškai skirtingose pramonės šakose ar situacijose, kad atversčiau požiūrį.',
    'greitai pasitelkiu išorinius ekspertus, kad gaučiau patikrintą sprendimą. ',
    'sistemiškai dekonstruoju problemą, nustatydamas visas prielaidas, ir tada bandau jas išardyti arba apversti aukštyn kojomis (pvz., "O kas, jei mes niekada neišspręsime šios problemos, bet tiesiog apeisime ją?").'
  ], scores:[2,1,4,3,5] }, /* [1](https://lietpaklt-my.sharepoint.com/personal/oleg_mozochin_lietpak_com/_layouts/15/Doc.aspx?sourcedoc=%7B13E9AD02-B3C7-493B-87A9-F776DACF0809%7D&file=Document.docx&action=default&mobileredirect=true) */

  { group:'Perframinimas', text:'10. Kai komanda generuoja idėjas, mano vaidmuo yra...', opts:[
    'iš karto atmesti bet kokias idėjas, kurios atrodo per daug rizikingos.',
    'užtikrinti, kad idėjos būtų realistiškos ir atitiktų dabartinį biudžetą. ',
    'paskirti vieną asmenį atstovauti „velnio advokato“ pozicijai, kuris visada privalo abejoti prielaidomis, metodais ir tikslais, taip užtikrinant nuolatinį idėjos peržiūrėjimą. ',
    'leisti generuoti laisvai, bet galiausiai pasirinkti geriausią iš akivaizdžių variantų.',
    'aktyviai paskatinti komandą generuoti idėjas, kurios prieštarautų dabartinei strategijai ir atrodytų neįgyvendinamos per artimiausius metus. '
  ], scores:[2,1,5,3,4] }, /* [1](https://lietpaklt-my.sharepoint.com/personal/oleg_mozochin_lietpak_com/_layouts/15/Doc.aspx?sourcedoc=%7B13E9AD02-B3C7-493B-87A9-F776DACF0809%7D&file=Document.docx&action=default&mobileredirect=true) */

  // III. Refleksija (Q11–Q15)
  { group:'Refleksija', text:'11. Po didelės sėkmės/nesėkmės, aš...', opts:[
    'naudoju rezultatus kaip medžiagą asmeniniam strateginiam dienoraščiui, kad suformuluočiau naujas taisykles ar metodologijas (principus), kurios galėtų būti taikomos bet kurioje ateities situacijoje. ',
    'surengiu trumpą susitikimą rezultatams aptarti ir padėkoti komandai.',
    'greitai einu prie kito darbo, nes praeitis neturi įtakos ateičiai. ',
    'organizuoju struktūrizuotą peržiūrą, kurioje dokumentuojami ne tik rezultatai, bet ir sąlygos/prielaidos, kuriomis priėmėme sprendimus.',
    ' parašau trumpą atmintinę apie pagrindines išmoktas pamokas, skirtą tik komandos nariams.'
  ], scores:[5,2,1,4,3] }, /* [1](https://lietpaklt-my.sharepoint.com/personal/oleg_mozochin_lietpak_com/_layouts/15/Doc.aspx?sourcedoc=%7B13E9AD02-B3C7-493B-87A9-F776DACF0809%7D&file=Document.docx&action=default&mobileredirect=true) */

  { group:'Refleksija', text:'12. Aš aktyviai ieškau kritinio grįžtamojo ryšio...', opts:[
    'iš nepriklausomų patarėjų ar vadovų iš kitų pramonės šakų, kad galėčiau patikrinti savo įsitikinimams ir aptikčiau "akląsias zonas" (angl. blind spots). ',
    'tik iš tų asmenų, kuriais pasitikiu ir kurie neabejotinai palaiko mano sprendimus.',
    'iš platesnio suinteresuotųjų šalių rato, įskaitant tuos, kurie buvo nepatogūs ar su manimi nesutiko. ',
    'tik tada, kai man jo reikia'
    'iš tiesioginių pavaldinių ir vadovų'
  ], scores:[5,2,4,1,3] }, /* [1](https://lietpaklt-my.sharepoint.com/personal/oleg_mozochin_lietpak_com/_layouts/15/Doc.aspx?sourcedoc=%7B13E9AD02-B3C7-493B-87A9-F776DACF0809%7D&file=Document.docx&action=default&mobileredirect=true) */

  { group:'Refleksija', text:'13. Kai analizuoju praeities klaidas, aš visų pirma ieškau...', opts:[
    'pamokų, kurios padėtų išvengti tų pačių klaidų ateityje. ',
    'klaidų padariusių asmenų, kad galėčiau užtikrinti atsakomybę. ',
    'prielaidų, kuriomis buvo remiamasi priimant sprendimus, kad išmokčiau atpažinti klaidingas prielaidas anksčiau',
    'kaip šios klaidos atspindi platesnes organizacines tendencijas ar kultūrines spragas, ir bandau sukurti ilgalaikę mokymosi sistemą organizacijoje. ',
    'akivaizdžių sistemų trūkumų, kad juos greitai pataisyčiau. '
  ], scores:[3,1,4,5,2] }, /* [1](https://lietpaklt-my.sharepoint.com/personal/oleg_mozochin_lietpak_com/_layouts/15/Doc.aspx?sourcedoc=%7B13E9AD02-B3C7-493B-87A9-F776DACF0809%7D&file=Document.docx&action=default&mobileredirect=true) */

  { group:'Refleksija', text:'14. Mano nuomonė apie strategijos keitimą yra...', opts:[
    'kad strategija turi būti nuolat peržiūrima, bet pakeitimai turėtų būti daromi tik po išsamios analizės.',
    'kad tai rodo silpnumą ir neapgalvotą pradinį planą, todėl stengiuosi laikytis pirminio plano. ',
    'kad planą galima keisti, bet tik metų pabaigoje, kad išvengtume chaoso.',
    'kad keisti reikia tik tada, kai pasiekiami blogi rezultatai. ',
    'kad strateginis planavimas yra nuolatinė mokymosi funkcija, todėl, gavus naujų duomenų ar atradus naują perspektyvą, pakeitimas turi būti inicijuojamas nedelsiant, net jei tai sukelia trumpalaikį nepatogumą. '
  ], scores:[4,1,3,2,5] }, /* [1](https://lietpaklt-my.sharepoint.com/personal/oleg_mozochin_lietpak_com/_layouts/15/Doc.aspx?sourcedoc=%7B13E9AD02-B3C7-493B-87A9-F776DACF0809%7D&file=Document.docx&action=default&mobileredirect=true) */

  { group:'Refleksija', text:'15. Sėkmingo sprendimo atveju, aš...', opts:[
    'dokumentuoju sėkmės istoriją ir nustatau, kokios vidinės/išorinės sąlygos turi būti pakartotos kituose projektuose.',
    'tiesiog džiaugiuosi sėkme ir imuosi kito projekto. ',
    'išvedu bendrą principą (metareglamentą) iš tos sėkmės ir bandau jį pritaikyti visiškai skirtingose situacijose (ne tik panašiuose projektuose), kad patikrinčiau jo universalumą.',
    'analizuoju, kurie veiksmai atvedė prie sėkmės.',
    'greitai pasidalinu pamoka apie sėkmę su kolegomis.'
  ], scores:[4,1,5,3,2] } /* [1](https://lietpaklt-my.sharepoint.com/personal/oleg_mozochin_lietpak_com/_layouts/15/Doc.aspx?sourcedoc=%7B13E9AD02-B3C7-493B-87A9-F776DACF0809%7D&file=Document.docx&action=default&mobileredirect=true) */
];

const container = document.getElementById('questions');
const form = document.getElementById('stqForm');

function render(){
  container.innerHTML = '';
  data.forEach((q, i)=>{
    const wrap = document.createElement('div'); wrap.className = 'q';
    const groupTitle = document.createElement('div'); groupTitle.className = 'group-title'; groupTitle.textContent = q.group; wrap.appendChild(groupTitle);
    const h3 = document.createElement('h3'); h3.textContent = q.text; wrap.appendChild(h3);
    const choices = document.createElement('div'); choices.className = 'choices';

    q.opts.forEach((opt, j)=>{
      const id = `q${i}_o${j}`;
      const label = document.createElement('label');
      const input = document.createElement('input'); input.type='radio'; input.name=`q${i}`; input.value=j; input.id=id; input.addEventListener('change', updateProgress);
      const span = document.createElement('span'); span.textContent = opt;
      label.htmlFor = id; label.appendChild(input); label.appendChild(span);
      choices.appendChild(label);
    });

    wrap.appendChild(choices);
    container.appendChild(wrap);
  });
}
render();

/* Progresas */
function answeredCount(){
  let cnt=0; data.forEach((_,i)=>{ if(form.querySelector(`input[name=q${i}]:checked`)) cnt++; });
  return cnt;
}



function updateProgress(){
  const cnt = answeredCount();
  document.getElementById('answeredInfo').textContent = `Atsakyta: ${cnt}/15`;
  document.getElementById('bar').style.width = `${(cnt/15)*100}%`;
}

/* Interpretacijų žymės */
function labelForScore(score){
  if (score >= 20) return 'Pažengęs';
  if (score >= 15) return 'Tvirtas';
  if (score >= 10) return 'Augantis';
  return 'Pradinis';
}

/* Srities rekomendacijos (trumpos) */
function adviceForDomain(domain, score){
  const level = labelForScore(score);
  const map = {
    'Sisteminis mąstymas': {
      Pažengęs: 'Išlaikyk sistemines peržiūras ir kritinių prielaidų auditą kas ketvirtį.',
      Tvirtas: 'Įvesk nuolatinį scenarijų planavimą ir vertės grandinės peržiūras per sprintus.',
      Augantis: 'Pradėk nuo prielaidų žemėlapio ir tarp-funkcinių sesijų su aiškiomis sąsajomis.',
      Pradinis: 'Sukurk bazinę „sistemos schemą“: procesai → sąsajos → rizikos → sprendimų taisyklės.'
    },
    'Perframinimas': {
      Pažengęs: 'Nuolat naudok „velnio advokato“ rolę ir nekonvencinių idėjų sėklas prieš sprendimą.',
      Tvirtas: 'Įtrauk 3 alternatyvius problemos apibrėžimus ir oponentų pasiūlymą kiekvienam svarbiam sprendimui.',
      Augantis: 'Pradėk nuo „ką darytų klientas/konkurentas?“ dirbtuvių ir analogijų iš kitų industrijų.',
      Pradinis: 'Venk tunelinio mąstymo: bent 2 skirtingi scenarijai ir 1 „neįtikėtinas“ variantas.'
    },
    'Refleksija': {
      Pažengęs: 'Fiksuok principus/metareglementus ir testuok juos kitose situacijose (transferabilumas).',
      Tvirtas: 'Įdiek sisteminę AAR (After Action Review) su prielaidų dokumentavimu.',
      Augantis: 'Kiekvienam projektui rašyk „pamokų“ santrauką ir planuok kitą eksperimentą.',
      Pradinis: 'Po kiekvieno ciklo skirk 20 min. refleksijai: kas pavyko/ne, kokios prielaidos buvo klaidingos.'
    }
  };
  return map[domain][level];
}

/* Skaičiavimas */
function compute(){
  let sys=0, refr=0, refl=0;
  let allAnswered=true;
  data.forEach((q,i)=>{
    const chosen = form.querySelector(`input[name=q${i}]:checked`);
    if(!chosen){ allAnswered=false; return; }
    const val = Number(chosen.value);
    const score = q.scores[val]; // balas pagal dokumentą
    if(q.group==='Sisteminis mąstymas') sys += score;
    else if(q.group==='Perframinimas') refr += score;
    else refl += score;
  });
  return {sys, refr, refl, allAnswered, total: sys+refr+refl};
}

/* Rezultatų atvaizdavimas su interpretacijomis */
function showResults(){
  const {sys, refr, refl, total, allAnswered} = compute();
  if(!allAnswered){
    alert('Užpildykite visus klausimus prieš pateikdami atsakymus.');
    return;
  }

  // Skaičiai
  document.getElementById('sysScore').textContent  = `${sys}/25`;
  document.getElementById('refrScore').textContent = `${refr}/25`;
  document.getElementById('reflScore').textContent = `${refl}/25`;
  document.getElementById('totalScore').textContent= `${total}/75`;

  // Interpretacijos
  const sysLabel  = labelForScore(sys);
  const refrLabel = labelForScore(refr);
  const reflLabel = labelForScore(refl);
  const totalLabel= labelForScore(Math.round(total/3)); // bendras lygis pagal vidurkį

  document.getElementById('sysInterp').textContent  = `${sysLabel}. ${adviceForDomain('Sisteminis mąstymas', sys)}`;
  document.getElementById('refrInterp').textContent = `${refrLabel}. ${adviceForDomain('Perframinimas', refr)}`;
  document.getElementById('reflInterp').textContent = `${reflLabel}. ${adviceForDomain('Refleksija', refl)}`;

  // Bendras komentaras
  const totalInterp = {
    Pažengęs: 'Bendras lygis aukštas — gali vesti strategines sesijas ir diegti organizacinius principus.',
    Tvirtas: 'Tvirta strateginė bazė — sutelk dėmesį į nuoseklumą ir prielaidų auditą kiekviename cikle.',
    Augantis: 'Augimo stadija — standartizuok refleksiją ir perframingą, kad išvengtum tunelinio mąstymo.',
    Pradinis: 'Pradinė stadija — pradėk nuo mažų ritualų: 2 scenarijai, AAR po kiekvieno projekto, „velnio advokato“ rolė.'
  }[totalLabel];

  document.getElementById('totalInterp').textContent = `${totalLabel}. ${totalInterp}`;
}

/* Išsaugojimas naršyklėje */
function save(){
  const answers = data.map((_,i)=>{
    const chosen = form.querySelector(`input[name=q${i}]:checked`);
    return chosen? Number(chosen.value) : null;
  });
  localStorage.setItem('stq_answers', JSON.stringify(answers));
  alert('Atsakymai išsaugoti naršyklėje.');
}
function load(){
  const raw = localStorage.getItem('stq_answers');
  if(!raw){ alert('Nerasta išsaugotų atsakymų.'); return; }
  const answers = JSON.parse(raw);
  answers.forEach((val,i)=>{
    if(val===null) return;
    const el = form.querySelector(`input[name=q${i}][value="${val}"]`);
    if(el){ el.checked = true; }
  });
  updateProgress();
  alert('Atsakymai atkurti iš naršyklės.');
}
function clearAll(){
  form.reset();
  updateProgress();
  document.getElementById('sysScore').textContent  = '0/25';
  document.getElementById('refrScore').textContent = '0/25';
  document.getElementById('reflScore').textContent = '0/25';
  document.getElementById('totalScore').textContent= '0/75';
  document.getElementById('sysInterp').textContent  = '';
  document.getElementById('refrInterp').textContent = '';
  document.getElementById('reflInterp').textContent = '';
  document.getElementById('totalInterp').textContent= '';
}

/* Mygtukų logika */
document.getElementById('submitBtn').addEventListener('click', showResults);
document.getElementById('saveBtn').addEventListener('click', save);
document.getElementById('loadBtn').addEventListener('click', load);
document.getElementById('clearBtn').addEventListener('click', clearAll);

/* Pradinė būsena */
updateProgress();
</script>
